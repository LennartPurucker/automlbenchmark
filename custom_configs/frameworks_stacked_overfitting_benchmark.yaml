---
#########################
### AutoML frameworks ###
#########################

AutoGluon:
  version: "latest"
  params:
    _save_artifacts: ['leaderboard', 'info']
    _leaderboard_test: True

#########################
### AutoGluon Default ###
#########################
AG_bq:
  extends: AutoGluon
  description: "AutoGluon Best Quality Default"
  params:
    _save_artifacts: [ 'leaderboard', 'info' ]
    presets: best_quality
    _leaderboard_test: True

AG_no_stack:
  extends: AutoGluon
  description: "AutoGluon without stacking"
  params:
    _save_artifacts: [ 'leaderboard', 'info' ]
    presets: best_quality
    _leaderboard_test: True
    num_stack_levels: 0

AG_stack:
  extends: AutoGluon
  description: "AutoGluon with stacking"
  params:
    _save_artifacts: ['leaderboard', 'info']
    presets: best_quality
    _leaderboard_test: True
    num_stack_levels: 1

AG_ho_dynamic_stacking:
  extends: AutoGluon
  description: "Determine SO based on holdout and refit with or without stacking."
  params:
    _save_artifacts: ['leaderboard', 'info', 'ho_leaderboard']
    presets: best_quality
    _leaderboard_test: True
    so_mitigation: "ho_dynamic_stacking"
    num_stack_levels: 1

AG_ho_dynamic_stacking_limited:
  extends: AutoGluon
  description: "Determine SO based on holdout and refit with or without stacking."
  params:
    _save_artifacts: ['leaderboard', 'info', 'ho_leaderboard']
    presets: best_quality
    _leaderboard_test: True
    so_mitigation: "ho_dynamic_stacking_limited"
    num_stack_levels: 1

AG_stack_clean_oof:
  extends: AutoGluon
  description: "AG_stack but clean oof prediction fix enabled whereby either IR, CIR, or SIG calibration is used based on fold model type and base model type."
  params:
    _save_artifacts: ['leaderboard', 'info']
    presets: best_quality
    _leaderboard_test: True
    num_stack_levels: 1
    predictor_para:
      learner_kwargs:
        clean_oof_predictions: True

AG_DS_full_l3:
  extends: AutoGluon
  description: "Best: Dynamic Stacking. Plus all trained models for l3 weighted ensemble."
  params:
    _save_artifacts: ['leaderboard', 'info', 'ho_leaderboard']
    presets: best_quality
    _leaderboard_test: True
    so_mitigation: "ho_dynamic_stacking"
    num_stack_levels: 1
    ag_args_fit: {'full_last_weighted_ensemble': True}
